<!doctype html>
<html lang="en" class="dark">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.79.1" />
<link rel="apple-touch-icon" sizes="180x180" href='http://0fd660284dee.ngrok.io/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='http://0fd660284dee.ngrok.io/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='http://0fd660284dee.ngrok.io/favicons/favicon-16x16.png'>
<link rel="manifest" href='http://0fd660284dee.ngrok.io/favicons/site.webmanifest'>
<link rel="mask-icon" href='http://0fd660284dee.ngrok.io/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='http://0fd660284dee.ngrok.io/favicons/favicon.ico'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.min.css" integrity="sha512-zu0eodDPCBAZf1vnIgwZ6qchMBt1xqgGkS9vBjVmunoH8pU7cc9OQKBiSQCclpvqySupy9Y1pLZc87VB40G4Sw==" crossorigin="anonymous" />
<meta name="msapplication-config" content='http://0fd660284dee.ngrok.io/favicons/browserconfig.xml'>
<title>1 - Http Foundation | Henri L.</title><meta property="og:title" content="1 - Http Foundation" />
<meta property="og:description" content="Initialisation du projet  Maintenant que vous avez installé Composer, on va créer une structure de dossiers adaptée au projet.
. ├── public │ └── index.php └── src │ └── Controller On va laisser le fichier index.php vide pour le moment.
La première étape va être d&#39;appeler la commande composer init qui va initialiser le projet Composer. Une série de questions seront posées. On peut ignorer chaque question pour le moment et passer à la suite." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://0fd660284dee.ngrok.io/dim/tp2/1-httpfoundation/" />
<meta property="article:modified_time" content="2020-12-19T16:40:00+01:00" />
<meta itemprop="name" content="1 - Http Foundation">
<meta itemprop="description" content="Initialisation du projet  Maintenant que vous avez installé Composer, on va créer une structure de dossiers adaptée au projet.
. ├── public │ └── index.php └── src │ └── Controller On va laisser le fichier index.php vide pour le moment.
La première étape va être d&#39;appeler la commande composer init qui va initialiser le projet Composer. Une série de questions seront posées. On peut ignorer chaque question pour le moment et passer à la suite.">
<meta itemprop="dateModified" content="2020-12-19T16:40:00+01:00" />
<meta itemprop="wordCount" content="1398">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="1 - Http Foundation"/>
<meta name="twitter:description" content="Initialisation du projet  Maintenant que vous avez installé Composer, on va créer une structure de dossiers adaptée au projet.
. ├── public │ └── index.php └── src │ └── Controller On va laisser le fichier index.php vide pour le moment.
La première étape va être d&#39;appeler la commande composer init qui va initialiser le projet Composer. Une série de questions seront posées. On peut ignorer chaque question pour le moment et passer à la suite."/>


<link rel="stylesheet" href="http://0fd660284dee.ngrok.io/css/styles.53af939a24d87ccb3e9d9b878957d4b23e59611e8c8b907bfd2e7a811d59955027daceac350bdf60c7ea91291830e1c46a2a5483259eb8b36bdd77f836707ab4.css" integrity="sha512-U6&#43;TmiTYfMs&#43;nZuHiVfUsj5ZYR6Mi5B7/S56gR1ZlVAn2s6sNQvfYMfqkSkYMOHEaipUgyWeuLNr3Xf4NnB6tA==">

</head>
<body class="page-page">
  <header class="nav_header">
<nav class="wrap nav menu">
	<a href="http://0fd660284dee.ngrok.io/" class="nav_brand">
		<picture data-lit="http://0fd660284dee.ngrok.io/images/logo-dark.svg" data-dark="http://0fd660284dee.ngrok.io/images/logo-light.svg">
			
			<source srcset = 'http://0fd660284dee.ngrok.io/images/logo-light.svg' media="(prefers-color-scheme: dark)">
			
			<img srcset = 'http://0fd660284dee.ngrok.io/images/logo-dark.svg' alt = 'Henri L. Logo' style='height:35px;'>
		</picture>
		<label class="nav_toggle toggle" title='Site Menu' role="button">
			<svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg>
		</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder='Search the docs ...' id="find" autocomplete="off">
  <div class="search_results results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/php"><span>PHP</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/systems"><span>Systems</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/dim"><span>Symfony</span></a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link" href="" target="_blank"></a>
		</li>
		<li class="nav-item"><div class = 'color_mode'>
  <label for = 'mode'></label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <div class="main wrap pt-4"><div class="grid-auto"><aside class="aside menu">
  <div>
    <label class="aside_toggle toggle" title='Docs Menu' role="button">Docs Menu <svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg></label>
  </div>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/" class="group">Symfony et PHP</a></h2>
      <section class="" id="docs-symfony-et-php">
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/courses/" class="group">Courses</a></h2>
      <section class="" id="docs-courses">
        <h3 class="section_link"><a id="docs-1---php" href="http://0fd660284dee.ngrok.io/dim/courses/1-php/">1 - PHP</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#why-">Why ?</a></li>
        <li><a href="#qui-sen-sert-">Qui s'en sert ?</a></li>
      </ul>
    </li>
    <li><a href="#symfony">Symfony</a>
      <ul>
        <li><a href="#qui-sen-sert--1">Qui s'en sert ?</a></li>
        <li><a href="#historique">Historique</a></li>
        <li><a href="#pourquoi-ce-cours-">Pourquoi ce cours ?</a></li>
      </ul>
    </li>
    <li><a href="#outils-pour-ce-cours">Outils pour ce cours</a>
      <ul>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#usage">Usage</a></li>
      </ul>
    </li>
    <li><a href="#syntaxe-de-base">Syntaxe de base</a></li>
    <li><a href="#syntaxe-objet">Syntaxe Objet</a>
      <ul>
        <li><a href="#typage-php">Typage PHP</a></li>
        <li><a href="#namespaces">Namespaces</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-2---http" href="http://0fd660284dee.ngrok.io/dim/courses/2-http/">2 - HTTP</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#pourquoi-http">Pourquoi HTTP</a></li>
    <li><a href="#flux-http">Flux HTTP</a></li>
    <li><a href="#message-http">Message HTTP</a>
      <ul>
        <li><a href="#requete">Requete</a>
          <ul>
            <li><a href="#methodes">Methodes</a></li>
            <li><a href="#mime-types">Mime-types</a></li>
          </ul>
        </li>
        <li><a href="#reponse">Reponse</a>
          <ul>
            <li><a href="#code-http">Code HTTP</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-3---composer" href="http://0fd660284dee.ngrok.io/dim/courses/3-composer/">3 - Composer</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#installation-de-composer">Installation de Composer</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-4---http-foundation" href="http://0fd660284dee.ngrok.io/dim/courses/4-http_foundation/">4 - HTTP Foundation</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#request">Request</a></li>
    <li><a href="#response">Response</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-5---annotations" href="http://0fd660284dee.ngrok.io/dim/courses/5-annotations/">5 - Annotations</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-6---doctrine" href="http://0fd660284dee.ngrok.io/dim/courses/6-doctrine/">6 - Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#entities">Entities</a>
      <ul>
        <li><a href="#typage-des-colonnes">Typage des colonnes</a></li>
        <li><a href="#relation">Relation</a></li>
      </ul>
    </li>
    <li><a href="#entity-manipulation">Entity Manipulation</a>
      <ul>
        <li><a href="#data-loading">Data Loading</a></li>
        <li><a href="#edit">Edit</a></li>
        <li><a href="#add">Add</a></li>
        <li><a href="#delete">Delete</a></li>
        <li><a href="#apply-changes">Apply changes</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-7---twig" href="http://0fd660284dee.ngrok.io/dim/courses/7-twig/">7 - Twig</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#templating">Templating</a></li>
    <li><a href="#twig">Twig</a>
      <ul>
        <li><a href="#syntaxe-de-base">Syntaxe de base</a></li>
        <li><a href="#filtres">Filtres</a></li>
        <li><a href="#functions">Functions</a></li>
        <li><a href="#controle-structures">Controle Structures</a></li>
        <li><a href="#operateur-de-comparaison">Operateur de comparaison</a></li>
      </ul>
    </li>
    <li><a href="#inclusion">Inclusion</a></li>
    <li><a href="#heritage">Heritage</a></li>
    <li><a href="#ressources">Ressources</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-8---router" href="http://0fd660284dee.ngrok.io/dim/courses/8-router/">8 - Router</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#ressources">Ressources</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-9---symfony" href="http://0fd660284dee.ngrok.io/dim/courses/9-symfony/">9 - Symfony</a></h3><nav id="TableOfContents"></nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/evaluation/" class="group">Evaluations</a></h2>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp1/" class="group">TP1</a></h2>
      <section class="" id="docs-tp1">
        <h3 class="section_link"><a id="docs-tp1---todo-list" href="http://0fd660284dee.ngrok.io/dim/tp1/tp1/">TP1 - Todo list</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1---base-de-donnees">1 - Base de donnees</a></li>
        <li><a href="#2---simplifier-lintegration-phphtml">2 - Simplifier l'integration PHP/HTML</a></li>
        <li><a href="#3---separer-lhtml">3 - Separer l'HTML</a></li>
        <li><a href="#4---composer-et-reorganisation">4 - Composer et reorganisation</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp2/" class="group">TP2</a></h2>
      <section class="" id="docs-tp2">
        <h3 class="section_link active"><a id="docs-1---http-foundation" href="http://0fd660284dee.ngrok.io/dim/tp2/1-httpfoundation/">1 - Http Foundation</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#initialisation-du-projet">Initialisation du projet</a></li>
    <li><a href="#mon-premier-controller">Mon premier Controller</a></li>
    <li><a href="#la-classe-appkernel">La classe App\Kernel</a></li>
    <li><a href="#abstraction-du-controller">Abstraction du controller</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-2---doctrine" href="http://0fd660284dee.ngrok.io/dim/tp2/2-doctrine/">2 - Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#creation-des-entities-et-repositories">Creation des Entities et Repositories</a></li>
    <li><a href="#implementer-les-fonctionnalites-de-la-plateforme">Implementer les fonctionnalites de la plateforme</a></li>
    <li><a href="#aller-plus-loin">Aller plus loin</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-3---twig" href="http://0fd660284dee.ngrok.io/dim/tp2/3-twig/">3 - Twig</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-4---router" href="http://0fd660284dee.ngrok.io/dim/tp2/4-router/">4 - Router</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#kernel-update">Kernel Update</a></li>
    <li><a href="#router-usage">Router Usage</a></li>
    <li><a href="#naming-and-generation">Naming and Generation</a></li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp3/" class="group">TP3</a></h2>
      <section class="" id="docs-tp3">
        <h3 class="section_link"><a id="docs-specifications-techniques" href="http://0fd660284dee.ngrok.io/dim/tp3/00-specs/">Specifications Techniques</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#objectif">Objectif</a></li>
    <li><a href="#features">Features</a></li>
    <li><a href="#permissions">Permissions</a></li>
    <li><a href="#wireframe">Wireframe</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-getting-started" href="http://0fd660284dee.ngrok.io/dim/tp3/01-getting-started-with-symfony/">Getting Started</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#installation-du-framework">Installation du Framework</a></li>
    <li><a href="#console">Console</a></li>
    <li><a href="#server-web">Server Web</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-doctrine" href="http://0fd660284dee.ngrok.io/dim/tp3/02-doctrine/">Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#modele">Modele</a>
      <ul>
        <li><a href="#ressources">Ressources</a></li>
        <li><a href="#create-entities">Create entities</a></li>
        <li><a href="#connexion-a-la-base">Connexion a la base</a></li>
        <li><a href="#migrations">Migrations</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-administration" href="http://0fd660284dee.ngrok.io/dim/tp3/03-administration/">Administration</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#administration">Administration</a>
      <ul>
        <li><a href="#administration-dans-symfony">Administration dans Symfony</a></li>
        <li><a href="#easyadmin">EasyAdmin</a></li>
        <li><a href="#ressources">Ressources</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-controllers" href="http://0fd660284dee.ngrok.io/dim/tp3/04-controllers/">Controllers</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#ressources">Ressources</a></li>
    <li><a href="#implementation">Implementation</a>
      <ul>
        <li><a href="#paramresolver">ParamResolver</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-form" href="http://0fd660284dee.ngrok.io/dim/tp3/05-form/">Form</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#formulaires">Formulaires</a>
      <ul>
        <li><a href="#ressources">Ressources</a></li>
        <li><a href="#integration-dans-le-projet">Integration dans le projet</a></li>
        <li><a href="#themes-de-formulaires">Themes de formulaires</a></li>
        <li><a href="#formulaires-externes">Formulaires externes</a></li>
        <li><a href="#theme-custom">Theme Custom</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-security" href="http://0fd660284dee.ngrok.io/dim/tp3/06-security/">Security</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#avant-propos">Avant-propos</a></li>
    <li><a href="#etat-du-projet">Etat du projet</a>
      <ul>
        <li><a href="#solution-a--recreate-the-entity-easy">Solution A : recreate the entity (easy)</a></li>
        <li><a href="#solution-b--update-the-existing-entity-advanced">Solution B : update the existing entity (advanced)</a>
          <ul>
            <li><a href="#getroles">getRoles</a></li>
            <li><a href="#getpassword">getPassword</a></li>
            <li><a href="#getsalt">getSalt</a></li>
            <li><a href="#getusername">getUsername</a></li>
          </ul>
        </li>
        <li><a href="#erasecredentials">eraseCredentials</a></li>
      </ul>
    </li>
    <li><a href="#authentification">Authentification</a>
      <ul>
        <li><a href="#formulaire">Formulaire</a></li>
      </ul>
    </li>
    <li><a href="#inscription">Inscription</a></li>
    <li><a href="#autorisation">Autorisation</a>
      <ul>
        <li><a href="#roles">Roles</a></li>
        <li><a href="#access-control">Access Control</a></li>
        <li><a href="#voters">Voters</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-services" href="http://0fd660284dee.ngrok.io/dim/tp3/07-services/">Services</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#travail-preparatoire">Travail preparatoire</a>
      <ul>
        <li><a href="#premier-service">Premier service</a></li>
        <li><a href="#gestion-dun-utilisateur">Gestion d'un utilisateur</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-validateurs" href="http://0fd660284dee.ngrok.io/dim/tp3/08-validateurs/">Validateurs</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#data-validation">Data Validation</a>
      <ul>
        <li><a href="#mise-en-place">Mise en place</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-serializer" href="http://0fd660284dee.ngrok.io/dim/tp3/09-serializer/">Serializer</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#avant-propos">Avant-propos</a></li>
    <li><a href="#implementation">Implementation</a>
      <ul>
        <li><a href="#get-authors-and-their-posts">Get Authors and their Posts</a></li>
        <li><a href="#consulter-la-liste-des-derniers-posts">Consulter la liste des derniers posts</a></li>
        <li><a href="#le-top-des-posts">Le Top des posts</a></li>
        <li><a href="#les-commentaires-pour-un-post">Les commentaires pour un Post</a></li>
        <li><a href="#heading"></a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
      </section>
  </section>
</aside>

  <main class="content">


    <h1>1 - Http Foundation</h1>
    <h2 id="initialisation-du-projet">Initialisation du projet</h2>
<hr>
<p>Maintenant que vous avez installé Composer, on va créer une structure de dossiers adaptée au projet.</p>
<pre><code>.
├── public
│   └── index.php
└── src
│   └── Controller
<p></code></pre><p>On va laisser le fichier index.php vide pour le moment.</p></p>
<p>La première étape va être d'appeler la commande  <code>composer init</code> qui va initialiser le projet Composer. Une série de questions seront posées. On peut ignorer chaque question pour le moment et passer à la suite.</p>
<p>Le fichier <code>composer.json</code> a été créé.
La structure de ce fichier est la suivante :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;henri/tp2&#34;</span><span class="p">,</span>
    <span class="nt">&#34;authors&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Henri&#34;</span><span class="p">,</span>
            <span class="nt">&#34;email&#34;</span><span class="p">:</span> <span class="s2">&#34;henri@larget.fr&#34;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&#34;require&#34;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Ce fichier contient toutes les informations du projet : les dépendances <code>require</code>, l'<code>autoload</code></p>
<p>On va donc commencer par ajouter la totalité des bibliothèques que nous avons besoin pour notre projet, à savoir <a href="https://packagist.org/packages/symfony/http-foundation"><code>symfony/http-foundation</code></a>. Pour cela, il faut juste faire <code>composer require </code> suivi du nom du package souhaité.</p>
<p>On va également ajouter une dépendance au package <a href="https://packagist.org/packages/symfony/var-dumper"><code>symfony/var-dumper</code></a> qui est une dépendance à utiliser en environnement de dev en modifiant la commande précédente et en ajoutant l'argument <code>require --dev </code>.</p>
<p>2 valeurs ont été ajoutées au fichier composer.json :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="err">...</span>
<span class="s2">&#34;require&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&#34;symfony/http-foundation&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0&#34;</span>
<span class="p">}</span><span class="err">,</span>
<span class="s2">&#34;require-dev&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&#34;symfony/var-dumper&#34;</span><span class="p">:</span> <span class="s2">&#34;^5.0&#34;</span>
<span class="p">}</span>
<span class="err">...</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Dans le cas où on prendrait le fichier déjà existant, il faut faire un <code>composer install</code>.</p>
</blockquote>
<p>Le composant var-dumper offre deux fonctions pratiques pour le développement :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php">
<span class="nx">dump</span><span class="p">(</span><span class="nv">$foo</span><span class="p">);</span> <span class="c1">//affiche le contenu d&#39;une variable
</span><span class="c1"></span>
<span class="nx">dd</span><span class="p">(</span><span class="nv">$foo</span><span class="p">);</span> <span class="c1">//affiche le contenu d&#39;une variable et arrête l&#39;execution du code
</span></code></pre></td></tr></table>
</div>
</div><p>La structure du dossier a changé :</p>
<pre><code>.
├── bin
│   └── composer
├── composer.json
├── composer.lock
├── public
│   └── index.php
├── src
│   └── Controller
└── vendor
    ├── autoload.php
    ├── bin
    ├── composer ...
    └── symfony ...
</code></pre><p>Le fichier Composer.lock ainsi que le dossier vendor se sont ajoutés. Le Composer.lock est un fichier qui permet de s'assurer que les versions installées sont toujours conservées dans l'état. Le dossier vendor, quant à lui, contient un dossier bin, un fichier autoload.php ainsi que des sous dossiers organisés par sous-dossiers.</p>
<p>Le fichier autoload est le seul fichier qu'il faudra par la suite inclure en utilisant la constante <code>__DIR__ . &quot;/path/to/vendor/autoload.php&quot;</code>  dans notre point d'entrée, et s'occupera des différents autoloads. Notre point d'entrée de site se trouve dans le dossier public, donc il faudra faire un chemin avec <code>__DIR__ . &quot;/../vendor/autoload.php&quot;</code>.</p>
<hr>
<p>Pour continuer dans la configuration de Composer, nous allons mettre en place l'autoload intégré.</p>
<p>Pour cela, on ajoute dans le fichier Composer.json à la suite des <code>require</code> une clé <code>autoload</code> qui contient :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;autoload&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&#34;psr-4&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&#34;App\\&#34;</span><span class="p">:</span> <span class="s2">&#34;src/&#34;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Cela signifie qu'à partir de maintenant, le dossier <code>src/</code> est le namespace <code>App\</code>. pour que les changements soient pris en compte, il faut faire un <code>composer dump-autoload</code> qui va regénérer l'autoload.</p>
<p>Maintenant que tout est bon, on va ajouter au fichier index.php du dossier public une première ligne de <code>require</code> vers le fichier autoload.php comme indiqué plus haut.</p>
<p>De cette manière, toutes les classes écrites ensuite seront automatiquement chargées et les dépendances seront accessibles.</p>
<h2 id="mon-premier-controller">Mon premier Controller</h2>
<p>Dans le namespace <code>App\Controller</code> créer une classe HomeController.
Cette classe aura une méthode index, et prendra en paramètre un objet de type :<code>Symfony\Component\HttpFoundation\Request</code> nommé <code>$request</code> et renverra un objet <code>Symfony\Component\HttpFoundation\Response</code> qui aura pour premier argument lors de l'instanciation une chaine de caractère <code>&quot;it works&quot;</code>.</p>
<h2 id="la-classe-appkernel">La classe App\Kernel</h2>
<p>Créez une classe PHP dans le namespace <code>App</code> qui va s'appeler <code>Kernel</code>, qui aura un attribut privé <code>$request</code> et aura un constructeur, une méthode publique qui s'appellera <code>run</code>, deux méthodes privées  <code>function route(Request $request): Response</code> et <code> function parametersResolver($className, $method): array</code>.</p>
<p>Dans le constructeur, en utilisant les <code>use</code> comme vu dans les exemples précédents, on ajoutera :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span> <span class="o">=</span> <span class="nx">Request</span><span class="o">::</span><span class="na">createFromGlobals</span><span class="p">();</span>
</code></pre></td></tr></table>
</div>
</div><p>Dans la méthode parametersResolver, il faut ajouter le code suivant :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="c1">//this code gives you the ability to see if a method should have a parameter
</span><span class="c1">//if so, set it as object or value. 
</span><span class="c1"></span><span class="nv">$reflexion</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\ReflectionMethod</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="nv">$method</span><span class="p">);</span>
<p><span class="nv">$params</span> <span class="o">=</span> <span class="nv">$reflexion</span><span class="o">-&gt;</span><span class="na">getParameters</span><span class="p">();</span>
<span class="nv">$autoInject</span> <span class="o">=</span> <span class="p">[</span>
<span class="nx">Request</span><span class="o">::</span><span class="na">class</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span>
<span class="p">];</span>
<span class="nv">$paramValues</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$params</span> <span class="k">as</span> <span class="nv">$param</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">hasType</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">isset</span><span class="p">(</span><span class="nv">$autoInject</span><span class="p">[</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()]))</span> <span class="p">{</span>
<span class="nv">$paramValues</span><span class="p">[</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">getPosition</span><span class="p">()]</span> <span class="o">=</span> <span class="nv">$autoInject</span><span class="p">[</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">getType</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()];</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="nv">$paramValues</span><span class="p">[</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">getPosition</span><span class="p">()]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$param</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">(),</span> <span class="k">null</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span></p>
<p><span class="k">return</span> <span class="nv">$paramValues</span><span class="p">;</span>
</code></pre></td></tr></table></p>
</div>
</div><p>La méthode Route :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="k">private</span> <span class="k">function</span> <span class="nf">route</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span><span class="o">:</span> <span class="nx">Response</span>
<span class="p">{</span>
  <span class="nv">$defaultController</span> <span class="o">=</span> <span class="nx">HomeController</span><span class="o">::</span><span class="na">class</span><span class="p">;</span>
<p><span class="c1">//we get the route here and clean it
</span><span class="c1"></span>    <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPathInfo</span><span class="p">();</span>
<span class="nv">$path</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">);</span></p>
<pre><code>&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$defaultController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;index&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// if subroute is not specified, it is merged to /index
</code></pre>
<p></span><span class="c1"></span>        <span class="k">list</span><span class="p">(</span><span class="nv">$controller</span><span class="p">,</span> <span class="nv">$method</span><span class="p">)</span> <span class="o">=</span> <span class="nx">array_merge</span><span class="p">(</span><span class="nx">explode</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="nv">$path</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]);</span></p>
<pre><code>    &lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;App&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Controller&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ucfirst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;Controller&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$defaultController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;index&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;sd&quot;&gt;/** @todo we called index of $defaultController, make a redirection to / here WITHOUT using the header function. */&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;class_exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method_exists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;sd&quot;&gt;/** @todo return a not found response here (status code 404) */&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$resolvedArguments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parametersResolver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call_user_func_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$resolvedArguments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
</code></pre>
<p></code></pre></td></tr></table></p>
</div>
</div><p>Le comportement attendu de la route est le suivant :</p>
<table>
<thead>
<tr>
<th>Route</th>
<th>Méthode de controller appelée</th>
</tr>
</thead>
<tbody>
<tr>
<td>/</td>
<td>HomeController  index</td>
</tr>
<tr>
<td>/about</td>
<td>AboutController index</td>
</tr>
<tr>
<td>/about/contact</td>
<td>AboutController contact</td>
</tr>
<tr>
<td>/home/index</td>
<td>=&gt; /</td>
</tr>
</tbody>
</table>
<p>Et la méthode run :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">route</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">);</span>
<span class="nv">$response</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">();</span>
<p></code></pre></td></tr></table></p>
</div>
</div><p>Enfin, ajouter les bons uses.</p>
<p>Dans le fichier public/index.php ajoutez les lignes suivantes à la suite du require :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">...</span>
<p><span class="k">use</span> <span class="nx">App\Kernel</span><span class="p">;</span>
<span class="nv">$kernel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kernel</span><span class="p">();</span>
<span class="nv">$kernel</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></td></tr></table></p>
</div>
</div><p>La méthode Run de notre Kernel va s'occuper de faire la suite des opérations.</p>
<p>Une fois tous les todos fixés, on va lancer le serveur intégré à PHP pour le développement.</p>
<p>À la raçine du projet, il faut tapper la commande suivante :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">php -S 0.0.0.0:8000 -t public
</code></pre></td></tr></table>
</div>
</div><p>Et aller sur http://localhost:8000/
Si tout se passe bien, &quot;le site affiche it works&quot;.</p>
<h2 id="abstraction-du-controller">Abstraction du controller</h2>
<p>Pour la suite du TP, on va créer une classe abstraite <code>App\Controller\AbstractController</code>.</p>
<p>Le code de la classe abstraite est la suivante :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="k">namespace</span> <span class="nx">App\Controller</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">\Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<p><span class="k">abstract</span> <span class="k">class</span> <span class="nc">AbstractController</span>
<span class="p">{</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">render</span><span class="p">(</span><span class="nv">$templateName</span><span class="p">,</span> <span class="nv">$data</span> <span class="o">=</span> <span class="p">[])</span>
<span class="p">{</span>
<span class="nx">ob_start</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$k</span> <span class="o">=&gt;</span> <span class="nv">$v</span><span class="p">)</span> <span class="nv">$$k</span> <span class="o">=</span> <span class="nv">$v</span><span class="p">;</span> <span class="c1">// worst line ever
</span><span class="c1"></span>        <span class="k">include</span><span class="p">(</span><span class="no"><strong>DIR</strong></span> <span class="o">.</span> <span class="s2">&quot;/../../templates/layout.php&quot;</span><span class="p">);</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="nx">ob_get_contents</span><span class="p">();</span>
<span class="nx">ob_end_clean</span><span class="p">();</span>
<span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table></p>
</div>
</div><p>Cette classe abstraite sera la base de nos controlleurs.</p>
<p>On va également créer un dossier templates à la racine de notre projet et lui donner cet aspect :</p>
<pre><code>.
├── bin
├── composer.json
├── public
├── templates
│   ├── home
│   │   └── index.php   
│   └── layout.php
├── src
│   └── Controller
│       └── AbstractController.php
└── vendor
    ├── autoload.php
    ├── bin
    ├── composer ...
    └── symfony ...
</code></pre><p>Dans le fichier layout.php, on va mettre le code suivant :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;!</span><span class="nx">DOCTYPE</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">&#34;stylesheet&#34;</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css&#34;</span>
          <span class="nx">integrity</span><span class="o">=</span><span class="s2">&#34;sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS&#34;</span> <span class="nx">crossorigin</span><span class="o">=</span><span class="s2">&#34;anonymous&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Mon</span> <span class="nx">super</span> <span class="nx">Site</span><span class="o">&lt;/</span><span class="nx">title</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="nx">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">body</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">main</span> <span class="nx">role</span><span class="o">=</span><span class="s2">&#34;main&#34;</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;container&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">header</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">nav</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;navbar navbar-expand-md navbar-dark bg-dark&#34;</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">a</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;navbar-brand&#34;</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;#&#34;</span><span class="o">&gt;</span><span class="nx">My</span> <span class="nx">website</span><span class="o">&lt;/</span><span class="nx">a</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;navbar-toggler&#34;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;button&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">toggle</span><span class="o">=</span><span class="s2">&#34;collapse&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">target</span><span class="o">=</span><span class="s2">&#34;#navbarsExampleDefault&#34;</span>
                        <span class="nx">aria</span><span class="o">-</span><span class="nx">controls</span><span class="o">=</span><span class="s2">&#34;navbarsExampleDefault&#34;</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">expanded</span><span class="o">=</span><span class="s2">&#34;false&#34;</span> <span class="nx">aria</span><span class="o">-</span><span class="nx">label</span><span class="o">=</span><span class="s2">&#34;Toggle navigation&#34;</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">class</span><span class="o">=</span><span class="s2">&#34;navbar-toggler-icon&#34;</span><span class="o">&gt;&lt;/</span><span class="nx">span</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="nx">button</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="nx">nav</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="nx">header</span><span class="o">&gt;</span>
        <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">include</span> <span class="nv">$templateName</span><span class="o">.</span><span class="s2">&#34;.php&#34;</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="err">
</span><span class="err">    &lt;/div&gt;
</span><span class="err">&lt;/main&gt;
</span><span class="err">&lt;footer class=&#34;container&#34;&gt;
</span><span class="err">    &lt;p&gt;&amp;copy; Nom Prenom 2019&lt;/p&gt;
</span><span class="err">&lt;/footer&gt;
</span><span class="err">&lt;script src=&#34;https://code.jquery.com/jquery-3.3.1.slim.min.js&#34;
</span><span class="err">        integrity=&#34;sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo&#34;
</span><span class="err">        crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
</span><span class="err">&lt;script src=&#34;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js&#34;
</span><span class="err">        integrity=&#34;sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut&#34;
</span><span class="err">        crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
</span><span class="err">&lt;script src=&#34;https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js&#34;
</span><span class="err">        integrity=&#34;sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k&#34;
</span><span class="err">        crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt;
</span><span class="err">
</span><span class="err">&lt;/body&gt;
</span><span class="err">&lt;/html&gt;
</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>Dans le fichier <code>templates/home/index.php</code> on va ajouter :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;</span><span class="nx">h1</span><span class="o">&gt;</span><span class="nx">Hello</span> <span class="o">&lt;?</span><span class="nx">php</span> <span class="k">echo</span> <span class="nv">$name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="err">&lt;/h1&gt;
</span></code></pre></td></tr></table>
</div>
</div><p>La classe App\Controller\HomeController doit étendre la classe App\Controller\AbstractController, et dans la méthode index, on met le code suivant :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php">    <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span>
        <span class="s2">&#34;home/index&#34;</span><span class="p">,</span> 
        <span class="p">[</span>
            <span class="s2">&#34;name&#34;</span><span class="o">=&gt;</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>De cette manière, en allant sur http://localhost:8000?name=Bob vous devriez voir &quot;Hello Bob&quot;.</p>
<blockquote>
<p>Votre objectif maintenant est de rajouter un formulaire sur la page qui pointe vers la même page (<code>&lt;form method=&quot;POST&quot; action=&quot;action=#&quot;&gt;</code>) avec un champ name vide, et de récupérer la variable passée en POST dans la requête pour l'afficher sur la page.</p>
</blockquote>
<p><strong>Travail à terminer et à rendre via github (invitez-moi dans votre projet github: decima)</strong></p>

    <div class="pager pager_lean">
    <div class="pager_item prev">
        

    </div>
    <div class="pager_item next">

        
        <a href="http://0fd660284dee.ngrok.io/dim/tp2/2-doctrine/" class="pager_link button" title="2 - Doctrine">
            <span class="pager_label">2 - Doctrine</span>
        </a>
        
    </div>

</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>

  </main>
</div>

  </div>
<footer class="pt-2 pb-2">
  <div class="wrap">
    <p>&copy; <span class="year">2021</span> <a href ="https://larget.fr" target="_blank" rel="noopener">Henri LARGET</a></p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>
<script src="http://0fd660284dee.ngrok.io/js/bundle.min.a251c7f0550864f354f94c9538ce8980b7b9447e027c10ec3d6a005903e293fec757620e8be58e37c5432355e9b5eb4a96512b594a38c7d0fa5db57a9a1baf76.js"></script>
<script src="http://0fd660284dee.ngrok.io/js/search.min.c014e4474413b21eba28a1c5597da13a6300dd0ae9749ac99961df33764b9af9558ecf605cb520eede578cf42023f5165cf5b58916304a2eba3eea922ecb5131.js" async defer></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.js" integrity="sha512-LGXpHNR8kKb3liBoiowLefRfx9BahbZ0FWE8vfTOV3vU4jD/9SpoyZQ49rc7gBwSzbFTZAaLCsSkpujb6ic+Og==" crossorigin="anonymous"></script>
</body>
</html>
