<!doctype html>
<html lang="en" class="dark">
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Hugo 0.79.1" />
<link rel="apple-touch-icon" sizes="180x180" href='http://0fd660284dee.ngrok.io/favicons/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='http://0fd660284dee.ngrok.io/favicons/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='http://0fd660284dee.ngrok.io/favicons/favicon-16x16.png'>
<link rel="manifest" href='http://0fd660284dee.ngrok.io/favicons/site.webmanifest'>
<link rel="mask-icon" href='http://0fd660284dee.ngrok.io/favicons/safari-pinned-tab.svg'  color="#004750">
<link rel="shortcut icon" href='http://0fd660284dee.ngrok.io/favicons/favicon.ico'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.min.css" integrity="sha512-zu0eodDPCBAZf1vnIgwZ6qchMBt1xqgGkS9vBjVmunoH8pU7cc9OQKBiSQCclpvqySupy9Y1pLZc87VB40G4Sw==" crossorigin="anonymous" />
<meta name="msapplication-config" content='http://0fd660284dee.ngrok.io/favicons/browserconfig.xml'>
<title>4 - Router | Henri L.</title><meta property="og:title" content="4 - Router" />
<meta property="og:description" content="À partir du TP précédent, créez une nouvelle branche p4.
Kernel Update Pour commencer, installez les composants suivants avec composer
symfony/routing doctrine/annotations doctrine/cache symfony/config symfony/framework-bundle Une fois les composants installés, on va modifier 2 fichiers du début du projet, le point d&#39;entrée de toutes les requêtes HTTP
1 2 3 4 5 6 7 8 9 10  &lt;?php $loader = require __DIR__ . &#39;/../vendor/autoload.php&#39;; \Doctrine\Common\Annotations\AnnotationRegistry::registerLoader([$loader, &#39;loadClass&#39;]); use App\Kernel; $kernel = new Kernel(false, true); $kernel-&gt;run();   Mais on fait également évoluer le kernel de cette manière :" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://0fd660284dee.ngrok.io/dim/tp2/4-router/" />
<meta property="article:modified_time" content="2020-12-19T16:40:00+01:00" />
<meta itemprop="name" content="4 - Router">
<meta itemprop="description" content="À partir du TP précédent, créez une nouvelle branche p4.
Kernel Update Pour commencer, installez les composants suivants avec composer
symfony/routing doctrine/annotations doctrine/cache symfony/config symfony/framework-bundle Une fois les composants installés, on va modifier 2 fichiers du début du projet, le point d&#39;entrée de toutes les requêtes HTTP
1 2 3 4 5 6 7 8 9 10  &lt;?php $loader = require __DIR__ . &#39;/../vendor/autoload.php&#39;; \Doctrine\Common\Annotations\AnnotationRegistry::registerLoader([$loader, &#39;loadClass&#39;]); use App\Kernel; $kernel = new Kernel(false, true); $kernel-&gt;run();   Mais on fait également évoluer le kernel de cette manière :">
<meta itemprop="dateModified" content="2020-12-19T16:40:00+01:00" />
<meta itemprop="wordCount" content="714">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="4 - Router"/>
<meta name="twitter:description" content="À partir du TP précédent, créez une nouvelle branche p4.
Kernel Update Pour commencer, installez les composants suivants avec composer
symfony/routing doctrine/annotations doctrine/cache symfony/config symfony/framework-bundle Une fois les composants installés, on va modifier 2 fichiers du début du projet, le point d&#39;entrée de toutes les requêtes HTTP
1 2 3 4 5 6 7 8 9 10  &lt;?php $loader = require __DIR__ . &#39;/../vendor/autoload.php&#39;; \Doctrine\Common\Annotations\AnnotationRegistry::registerLoader([$loader, &#39;loadClass&#39;]); use App\Kernel; $kernel = new Kernel(false, true); $kernel-&gt;run();   Mais on fait également évoluer le kernel de cette manière :"/>


<link rel="stylesheet" href="http://0fd660284dee.ngrok.io/css/styles.53af939a24d87ccb3e9d9b878957d4b23e59611e8c8b907bfd2e7a811d59955027daceac350bdf60c7ea91291830e1c46a2a5483259eb8b36bdd77f836707ab4.css" integrity="sha512-U6&#43;TmiTYfMs&#43;nZuHiVfUsj5ZYR6Mi5B7/S56gR1ZlVAn2s6sNQvfYMfqkSkYMOHEaipUgyWeuLNr3Xf4NnB6tA==">

</head>
<body class="page-page">
  <header class="nav_header">
<nav class="wrap nav menu">
	<a href="http://0fd660284dee.ngrok.io/" class="nav_brand">
		<picture data-lit="http://0fd660284dee.ngrok.io/images/logo-dark.svg" data-dark="http://0fd660284dee.ngrok.io/images/logo-light.svg">
			
			<source srcset = 'http://0fd660284dee.ngrok.io/images/logo-light.svg' media="(prefers-color-scheme: dark)">
			
			<img srcset = 'http://0fd660284dee.ngrok.io/images/logo-dark.svg' alt = 'Henri L. Logo' style='height:35px;'>
		</picture>
		<label class="nav_toggle toggle" title='Site Menu' role="button">
			<svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg>
		</label>
	</a>
	<ul class="nav_body">
		<li class="nav-item">
<div class="search">
  <label for="find" class="search_label"><svg class="icon">
  <use xlink:href="#search"></use>
</svg>
  </label>
  <input type="search" class="search_field" placeholder='Search the docs ...' id="find" autocomplete="off">
  <div class="search_results results"></div>
</div>



		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/php"><span>PHP</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/systems"><span>Systems</span></a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="http://0fd660284dee.ngrok.io/dim"><span>Symfony</span></a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link" href="" target="_blank"></a>
		</li>
		<li class="nav-item"><div class = 'color_mode'>
  <label for = 'mode'></label>
  <input type = 'checkbox' class = 'color_choice' id = 'mode' title="Toggle Dark Mode">
</div>
</li>
	</ul>
</nav>

  </header>
  <div class="main wrap pt-4"><div class="grid-auto"><aside class="aside menu">
  <div>
    <label class="aside_toggle toggle" title='Docs Menu' role="button">Docs Menu <svg class="icon">
  <use xlink:href="#harmburger"></use>
</svg></label>
  </div>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/" class="group">Symfony et PHP</a></h2>
      <section class="" id="docs-symfony-et-php">
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/courses/" class="group">Courses</a></h2>
      <section class="" id="docs-courses">
        <h3 class="section_link"><a id="docs-1---php" href="http://0fd660284dee.ngrok.io/dim/courses/1-php/">1 - PHP</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#why-">Why ?</a></li>
        <li><a href="#qui-sen-sert-">Qui s'en sert ?</a></li>
      </ul>
    </li>
    <li><a href="#symfony">Symfony</a>
      <ul>
        <li><a href="#qui-sen-sert--1">Qui s'en sert ?</a></li>
        <li><a href="#historique">Historique</a></li>
        <li><a href="#pourquoi-ce-cours-">Pourquoi ce cours ?</a></li>
      </ul>
    </li>
    <li><a href="#outils-pour-ce-cours">Outils pour ce cours</a>
      <ul>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#usage">Usage</a></li>
      </ul>
    </li>
    <li><a href="#syntaxe-de-base">Syntaxe de base</a></li>
    <li><a href="#syntaxe-objet">Syntaxe Objet</a>
      <ul>
        <li><a href="#typage-php">Typage PHP</a></li>
        <li><a href="#namespaces">Namespaces</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-2---http" href="http://0fd660284dee.ngrok.io/dim/courses/2-http/">2 - HTTP</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#pourquoi-http">Pourquoi HTTP</a></li>
    <li><a href="#flux-http">Flux HTTP</a></li>
    <li><a href="#message-http">Message HTTP</a>
      <ul>
        <li><a href="#requete">Requete</a>
          <ul>
            <li><a href="#methodes">Methodes</a></li>
            <li><a href="#mime-types">Mime-types</a></li>
          </ul>
        </li>
        <li><a href="#reponse">Reponse</a>
          <ul>
            <li><a href="#code-http">Code HTTP</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-3---composer" href="http://0fd660284dee.ngrok.io/dim/courses/3-composer/">3 - Composer</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#installation-de-composer">Installation de Composer</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-4---http-foundation" href="http://0fd660284dee.ngrok.io/dim/courses/4-http_foundation/">4 - HTTP Foundation</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#request">Request</a></li>
    <li><a href="#response">Response</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-5---annotations" href="http://0fd660284dee.ngrok.io/dim/courses/5-annotations/">5 - Annotations</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link"><a id="docs-6---doctrine" href="http://0fd660284dee.ngrok.io/dim/courses/6-doctrine/">6 - Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#entities">Entities</a>
      <ul>
        <li><a href="#typage-des-colonnes">Typage des colonnes</a></li>
        <li><a href="#relation">Relation</a></li>
      </ul>
    </li>
    <li><a href="#entity-manipulation">Entity Manipulation</a>
      <ul>
        <li><a href="#data-loading">Data Loading</a></li>
        <li><a href="#edit">Edit</a></li>
        <li><a href="#add">Add</a></li>
        <li><a href="#delete">Delete</a></li>
        <li><a href="#apply-changes">Apply changes</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-7---twig" href="http://0fd660284dee.ngrok.io/dim/courses/7-twig/">7 - Twig</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#templating">Templating</a></li>
    <li><a href="#twig">Twig</a>
      <ul>
        <li><a href="#syntaxe-de-base">Syntaxe de base</a></li>
        <li><a href="#filtres">Filtres</a></li>
        <li><a href="#functions">Functions</a></li>
        <li><a href="#controle-structures">Controle Structures</a></li>
        <li><a href="#operateur-de-comparaison">Operateur de comparaison</a></li>
      </ul>
    </li>
    <li><a href="#inclusion">Inclusion</a></li>
    <li><a href="#heritage">Heritage</a></li>
    <li><a href="#ressources">Ressources</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-8---router" href="http://0fd660284dee.ngrok.io/dim/courses/8-router/">8 - Router</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#ressources">Ressources</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-9---symfony" href="http://0fd660284dee.ngrok.io/dim/courses/9-symfony/">9 - Symfony</a></h3><nav id="TableOfContents"></nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/evaluation/" class="group">Evaluations</a></h2>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp1/" class="group">TP1</a></h2>
      <section class="" id="docs-tp1">
        <h3 class="section_link"><a id="docs-tp1---todo-list" href="http://0fd660284dee.ngrok.io/dim/tp1/tp1/">TP1 - Todo list</a></h3><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1---base-de-donnees">1 - Base de donnees</a></li>
        <li><a href="#2---simplifier-lintegration-phphtml">2 - Simplifier l'integration PHP/HTML</a></li>
        <li><a href="#3---separer-lhtml">3 - Separer l'HTML</a></li>
        <li><a href="#4---composer-et-reorganisation">4 - Composer et reorganisation</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp2/" class="group">TP2</a></h2>
      <section class="" id="docs-tp2">
        <h3 class="section_link"><a id="docs-1---http-foundation" href="http://0fd660284dee.ngrok.io/dim/tp2/1-httpfoundation/">1 - Http Foundation</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#initialisation-du-projet">Initialisation du projet</a></li>
    <li><a href="#mon-premier-controller">Mon premier Controller</a></li>
    <li><a href="#la-classe-appkernel">La classe App\Kernel</a></li>
    <li><a href="#abstraction-du-controller">Abstraction du controller</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-2---doctrine" href="http://0fd660284dee.ngrok.io/dim/tp2/2-doctrine/">2 - Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#creation-des-entities-et-repositories">Creation des Entities et Repositories</a></li>
    <li><a href="#implementer-les-fonctionnalites-de-la-plateforme">Implementer les fonctionnalites de la plateforme</a></li>
    <li><a href="#aller-plus-loin">Aller plus loin</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-3---twig" href="http://0fd660284dee.ngrok.io/dim/tp2/3-twig/">3 - Twig</a></h3><nav id="TableOfContents"></nav>
        <h3 class="section_link active"><a id="docs-4---router" href="http://0fd660284dee.ngrok.io/dim/tp2/4-router/">4 - Router</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#kernel-update">Kernel Update</a></li>
    <li><a href="#router-usage">Router Usage</a></li>
    <li><a href="#naming-and-generation">Naming and Generation</a></li>
  </ul>
</nav>
      </section>
  </section>
  <section class="section aside_inner">
    <h2 class="section_title"><a  href="http://0fd660284dee.ngrok.io/dim/tp3/" class="group">TP3</a></h2>
      <section class="" id="docs-tp3">
        <h3 class="section_link"><a id="docs-specifications-techniques" href="http://0fd660284dee.ngrok.io/dim/tp3/00-specs/">Specifications Techniques</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#objectif">Objectif</a></li>
    <li><a href="#features">Features</a></li>
    <li><a href="#permissions">Permissions</a></li>
    <li><a href="#wireframe">Wireframe</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-getting-started" href="http://0fd660284dee.ngrok.io/dim/tp3/01-getting-started-with-symfony/">Getting Started</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#installation-du-framework">Installation du Framework</a></li>
    <li><a href="#console">Console</a></li>
    <li><a href="#server-web">Server Web</a></li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-doctrine" href="http://0fd660284dee.ngrok.io/dim/tp3/02-doctrine/">Doctrine</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#modele">Modele</a>
      <ul>
        <li><a href="#ressources">Ressources</a></li>
        <li><a href="#create-entities">Create entities</a></li>
        <li><a href="#connexion-a-la-base">Connexion a la base</a></li>
        <li><a href="#migrations">Migrations</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-administration" href="http://0fd660284dee.ngrok.io/dim/tp3/03-administration/">Administration</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#administration">Administration</a>
      <ul>
        <li><a href="#administration-dans-symfony">Administration dans Symfony</a></li>
        <li><a href="#easyadmin">EasyAdmin</a></li>
        <li><a href="#ressources">Ressources</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-controllers" href="http://0fd660284dee.ngrok.io/dim/tp3/04-controllers/">Controllers</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#ressources">Ressources</a></li>
    <li><a href="#implementation">Implementation</a>
      <ul>
        <li><a href="#paramresolver">ParamResolver</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-form" href="http://0fd660284dee.ngrok.io/dim/tp3/05-form/">Form</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#formulaires">Formulaires</a>
      <ul>
        <li><a href="#ressources">Ressources</a></li>
        <li><a href="#integration-dans-le-projet">Integration dans le projet</a></li>
        <li><a href="#themes-de-formulaires">Themes de formulaires</a></li>
        <li><a href="#formulaires-externes">Formulaires externes</a></li>
        <li><a href="#theme-custom">Theme Custom</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-security" href="http://0fd660284dee.ngrok.io/dim/tp3/06-security/">Security</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#avant-propos">Avant-propos</a></li>
    <li><a href="#etat-du-projet">Etat du projet</a>
      <ul>
        <li><a href="#solution-a--recreate-the-entity-easy">Solution A : recreate the entity (easy)</a></li>
        <li><a href="#solution-b--update-the-existing-entity-advanced">Solution B : update the existing entity (advanced)</a>
          <ul>
            <li><a href="#getroles">getRoles</a></li>
            <li><a href="#getpassword">getPassword</a></li>
            <li><a href="#getsalt">getSalt</a></li>
            <li><a href="#getusername">getUsername</a></li>
          </ul>
        </li>
        <li><a href="#erasecredentials">eraseCredentials</a></li>
      </ul>
    </li>
    <li><a href="#authentification">Authentification</a>
      <ul>
        <li><a href="#formulaire">Formulaire</a></li>
      </ul>
    </li>
    <li><a href="#inscription">Inscription</a></li>
    <li><a href="#autorisation">Autorisation</a>
      <ul>
        <li><a href="#roles">Roles</a></li>
        <li><a href="#access-control">Access Control</a></li>
        <li><a href="#voters">Voters</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-services" href="http://0fd660284dee.ngrok.io/dim/tp3/07-services/">Services</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#travail-preparatoire">Travail preparatoire</a>
      <ul>
        <li><a href="#premier-service">Premier service</a></li>
        <li><a href="#gestion-dun-utilisateur">Gestion d'un utilisateur</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-validateurs" href="http://0fd660284dee.ngrok.io/dim/tp3/08-validateurs/">Validateurs</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#data-validation">Data Validation</a>
      <ul>
        <li><a href="#mise-en-place">Mise en place</a></li>
      </ul>
    </li>
  </ul>
</nav>
        <h3 class="section_link"><a id="docs-serializer" href="http://0fd660284dee.ngrok.io/dim/tp3/09-serializer/">Serializer</a></h3><nav id="TableOfContents">
  <ul>
    <li><a href="#avant-propos">Avant-propos</a></li>
    <li><a href="#implementation">Implementation</a>
      <ul>
        <li><a href="#get-authors-and-their-posts">Get Authors and their Posts</a></li>
        <li><a href="#consulter-la-liste-des-derniers-posts">Consulter la liste des derniers posts</a></li>
        <li><a href="#le-top-des-posts">Le Top des posts</a></li>
        <li><a href="#les-commentaires-pour-un-post">Les commentaires pour un Post</a></li>
        <li><a href="#heading"></a></li>
      </ul>
    </li>
  </ul>
</nav>
      </section>
  </section>
      </section>
  </section>
</aside>

  <main class="content">


    <h1>4 - Router</h1>
    <p>À partir du TP précédent, créez une nouvelle branche <code>p4</code>.</p>
<h2 id="kernel-update">Kernel Update</h2>
<p>Pour commencer, installez les composants suivants avec composer</p>
<pre><code>symfony/routing
doctrine/annotations
doctrine/cache
symfony/config
symfony/framework-bundle
</code></pre><p>Une fois les composants installés, on va modifier 2 fichiers du début du projet, le point d'entrée de toutes les requêtes HTTP</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<p><span class="nv">$loader</span> <span class="o">=</span> <span class="k">require</span> <span class="no"><strong>DIR</strong></span> <span class="o">.</span> <span class="s1">'/../vendor/autoload.php'</span><span class="p">;</span></p>
<p><span class="nx">\Doctrine\Common\Annotations\AnnotationRegistry</span><span class="o">::</span><span class="na">registerLoader</span><span class="p">([</span><span class="nv">$loader</span><span class="p">,</span> <span class="s1">'loadClass'</span><span class="p">]);</span></p>
<p><span class="k">use</span> <span class="nx">App\Kernel</span><span class="p">;</span></p>
<p><span class="nv">$kernel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Kernel</span><span class="p">(</span><span class="k">false</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
<span class="nv">$kernel</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre></td></tr></table></p>
</div>
</div><p>Mais on fait également évoluer le kernel de cette manière :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>
<p><span class="k">namespace</span> <span class="nx">App</span><span class="p">;</span></p>
<p><span class="k">use</span> <span class="nx">App\Controller\AbstractController</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Annotations\AnnotationReader</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\Common\Cache\FilesystemCache</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\EntityManager</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\EntityManagerInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Doctrine\ORM\Tools\Setup</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Routing\AnnotatedRouteControllerLoader</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\HttpFoundation\Response</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Exception\ResourceNotFoundException</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Loader\AnnotationDirectoryLoader</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Config\FileLocator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\RequestContext</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Routing\Router</span><span class="p">;</span></p>
<p><span class="k">class</span> <span class="nc">Kernel</span>
<span class="p">{</span>
<span class="k">private</span> <span class="nx">bool</span> <span class="nv">$cacheIsEnabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="k">private</span> <span class="nx">bool</span> <span class="nv">$devIsEnabled</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="k">private</span> <span class="nv">$request</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="k">private</span> <span class="nv">$entityManager</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="k">private</span> <span class="o">?</span><span class="nx">Router</span> <span class="nv">$router</span> <span class="o">=</span> <span class="k">null</span><span class="p">;</span></p>
<pre><code>&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;fm&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$devIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$cacheIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cacheIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$cacheIsEnabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;devIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$devIsEnabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createFromGlobals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;entityManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;buildEntityManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getDirCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;__DIR__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/../var/cache&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;router&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AnnotationDirectoryLoader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;FileLocator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;__DIR__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;/Controller/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AnnotatedRouteControllerLoader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AnnotationReader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;__DIR__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/Controller&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cacheIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;#34;cache_dir&amp;#34;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getDirCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/router&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;buildEntityManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;EntityManager&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Setup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;createAnnotationMetadataConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;__DIR__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/Entity&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;devIsEnabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cacheIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getDirCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/proxy&amp;#34;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;cacheIsEnabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;FilesystemCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getDirCache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;#34;/doctrine&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Create a simple &amp;#34;default&amp;#34; Doctrine ORM configuration for Annotations
</code></pre>
<p></span><span class="c1"></span>
<span class="nv">$conn</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
<span class="s1">'driver'</span> <span class="o">=&gt;</span> <span class="s1">'pdo_sqlite'</span><span class="p">,</span>
<span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="no"><strong>DIR</strong></span> <span class="o">.</span> <span class="s1">'/../db.sqlite'</span><span class="p">,</span>
<span class="p">);</span></p>
<pre><code>    &lt;span class=&quot;c1&quot;&gt;// obtaining the entity manager
</code></pre>
<p></span><span class="c1"></span>        <span class="k">return</span> <span class="nx">EntityManager</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nv">$conn</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>
<span class="p">}</span></p>
<pre><code>&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getEntityManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;entityManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Request&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Response&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;RequestContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
</code></pre>
<p><span class="c1">// Routing can match routes with incoming requests
</span><span class="c1"></span>        <span class="k">try</span> <span class="p">{</span>
<span class="nv">$parameters</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">-&gt;</span><span class="na">match</span><span class="p">(</span><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">getPathInfo</span><span class="p">());</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">ResourceNotFoundException</span> <span class="nv">$notFoundException</span><span class="p">)</span> <span class="p">{</span>
<span class="k">return</span> <span class="k">new</span> <span class="nx">Response</span><span class="p">(</span><span class="s2">&quot;Page Not Found&quot;</span><span class="p">,</span> <span class="nx">Response</span><span class="o">::</span><span class="na">HTTP_NOT_FOUND</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">list</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="nv">$method</span><span class="p">)</span> <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s2">&quot;::&quot;</span><span class="p">,</span> <span class="nv">$parameters</span><span class="p">[</span><span class="s2">&quot;_controller&quot;</span><span class="p">]);</span>
<span class="nv">$resolvedArguments</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parametersResolver</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="nv">$method</span><span class="p">,</span> <span class="nv">$parameters</span><span class="p">);</span>
<span class="nv">$controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nv">$className</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$controller</span> <span class="nx">instanceof</span> <span class="nx">AbstractController</span><span class="p">)</span> <span class="p">{</span>
<span class="nv">$controller</span><span class="o">-&gt;</span><span class="na">setRouter</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">return</span> <span class="nx">call_user_func_array</span><span class="p">([</span><span class="nv">$controller</span><span class="p">,</span> <span class="nv">$method</span><span class="p">],</span> <span class="nv">$resolvedArguments</span><span class="p">);</span>
<span class="p">}</span></p>
<pre><code>&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;parametersResolver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$routerParameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;array&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;$reflexion&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;\ReflectionMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;\ReflectionException&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nv&quot;&gt;$params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$reflexion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$autoInject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;EntityManagerInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;entityManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$paramValues&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$params&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$autoInject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nv&quot;&gt;$paramValues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPosition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$autoInject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nv&quot;&gt;$paramValues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getPosition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$routerParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$param&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$paramValues&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
</code></pre>
<p><span class="p">}</span>
</code></pre></td></tr></table></p>
</div>
</div><h2 id="router-usage">Router Usage</h2>
<p>En retournant sur le site, on constate que la page ne fonctionne plus.</p>
<blockquote>
<p>Pourquoi le site ne fonctionne plus ?</p>
</blockquote>
<p>Ajouter l'annotation suivante avec les imports nécessaires sur la méthode Index du contrôleur principal</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text"> @Route(&#34;/&#34;,name=&#34;homepage&#34;)
</code></pre></td></tr></table>
</div>
</div><p>Rien ne se passe. Désactivez le cache. Si tout se passe bien, vous obtenez l'erreur suivante :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-text" data-lang="text">...Uncaught Error: Call to undefined method App\Controller\HomeController::setRouter()....
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Que signifie cette erreur ? Trouver où cet appel est effectué, et implémentez le code pour fixer ce problème.</p>
</blockquote>
<p>Implémentez toutes les routes nécessaires pour résoudre les appels. Les liens ne fonctionnent plus.</p>
<blockquote>
<p>Résoudre les problème avec <code>$id</code> dans certaines méthodes - Sans modifier le contenu des controlleurs.</p>
</blockquote>
<h2 id="naming-and-generation">Naming and Generation</h2>
<p>Pour résoudre le problème de lien, il faut implémenter une <a href="https://twig.symfony.com/doc/3.x/advanced.html#functions">fonction twig</a> nommée <code>path</code> et permettant d'utiliser la méthode &quot;generate&quot; du router directement de la manière suivante :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-twig" data-lang="twig"><span class="cp">{{</span> <span class="nv">path</span><span class="o">(</span><span class="s2">&#34;game_show&#34;</span><span class="o">,{</span><span class="nv">id</span><span class="o">:</span> <span class="nv">game.id</span><span class="o">})</span> <span class="cp">}}</span><span class="x">
</span></code></pre></td></tr></table>
</div>
</div><p>et modifier tous les liens avec la méthode <code>path</code>.</p>
<p>Enfin, ajouter une nouvelle méthode dans l'AbstractController nommée <code>redirectToRoute</code> qui va utiliser le <code>Router</code> et la méthode <code>redirect</code>. Remplacer toutes les redirections présentes dans les <code>controller</code> par cette méthode.</p>

    <div class="pager">
    <div class="pager_item prev">
        
        <a href="http://0fd660284dee.ngrok.io/dim/tp2/3-twig/" class="pager_link button" title="3 - Twig">
            <span class="pager_label">3 - Twig</span>
        </a>
        

    </div>
    <div class="pager_item next">

        
    </div>

</div>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>

  </main>
</div>

  </div>
<footer class="pt-2 pb-2">
  <div class="wrap">
    <p>&copy; <span class="year">2021</span> <a href ="https://larget.fr" target="_blank" rel="noopener">Henri LARGET</a></p>
  </div>
</footer>


<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 492.004 492.004" id="next">
    <path d="M484.14 226.886L306.46 49.202c-5.072-5.072-11.832-7.856-19.04-7.856-7.216 0-13.972 2.788-19.044 7.856l-16.132 16.136c-5.068 5.064-7.86 11.828-7.86 19.04 0 7.208 2.792 14.2 7.86 19.264L355.9 207.526H26.58C11.732 207.526 0 219.15 0 234.002v22.812c0 14.852 11.732 27.648 26.58 27.648h330.496L252.248 388.926c-5.068 5.072-7.86 11.652-7.86 18.864 0 7.204 2.792 13.88 7.86 18.948l16.132 16.084c5.072 5.072 11.828 7.836 19.044 7.836 7.208 0 13.968-2.8 19.04-7.872l177.68-177.68c5.084-5.088 7.88-11.88 7.86-19.1.016-7.244-2.776-14.04-7.864-19.12z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.999 511.999" id="search">
    <path d="M508.874 478.708L360.142 329.976c28.21-34.827 45.191-79.103 45.191-127.309C405.333 90.917 314.416 0 202.666 0S0 90.917 0 202.667s90.917 202.667 202.667 202.667c48.206 0 92.482-16.982 127.309-45.191l148.732 148.732c4.167 4.165 10.919 4.165 15.086 0l15.081-15.082c4.165-4.166 4.165-10.92-.001-15.085zM202.667 362.667c-88.229 0-160-71.771-160-160s71.771-160 160-160 160 71.771 160 160-71.771 160-160 160z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 241 179" id="harmburger">
    <path d="M1 10C1 4.477 5.477 0 11 0h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11C5.477 20 1 15.523 1 10zm0 80c0-5.523 4.477-10 10-10h220c5.523 0 10 4.477 10 10s-4.477 10-10 10H11c-5.523 0-10-4.477-10-10zm9 69c-5.523 0-10 4.477-10 10s4.477 10 10 10h220c5.523 0 10-4.477 10-10s-4.477-10-10-10H10z"></path>
  </symbol>
</svg>
<script src="http://0fd660284dee.ngrok.io/js/bundle.min.a251c7f0550864f354f94c9538ce8980b7b9447e027c10ec3d6a005903e293fec757620e8be58e37c5432355e9b5eb4a96512b594a38c7d0fa5db57a9a1baf76.js"></script>
<script src="http://0fd660284dee.ngrok.io/js/search.min.c014e4474413b21eba28a1c5597da13a6300dd0ae9749ac99961df33764b9af9558ecf605cb520eede578cf42023f5165cf5b58916304a2eba3eea922ecb5131.js" async defer></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.1.0/reveal.js" integrity="sha512-LGXpHNR8kKb3liBoiowLefRfx9BahbZ0FWE8vfTOV3vU4jD/9SpoyZQ49rc7gBwSzbFTZAaLCsSkpujb6ic+Og==" crossorigin="anonymous"></script>
</body>
</html>
